<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <script type="module" src="./rete.js"></script>
  <script type="module">
    import init, {WorkerPool, rete_init, greet, par_sum} from './rete.js'

    async function run() {
      await init();
      await rete_init();
      let workerPool = new WorkerPool(navigator.hardwareConcurrency);
      let data = [];
      for (let i = 0; i != 1024; ++i) {
        data.push(i);
      }
      let sum = await par_sum(4, workerPool, data);
      log("Sum is " + sum);
    }

    run();
  </script>
  <body>
  </body>
  </html>
  